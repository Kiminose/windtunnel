#! python3

import matplotlib.pyplot as plt

def filtrage_moyenne(liste, nb_moyen):
    Liste_lissé = []
    for i in range(len(liste)):
        compt = 0
        valeur = 0
        for indice in range(-(nb_moyen//2)+i, i+(nb_moyen//2)+1):
            if indice>=0 and indice < len(liste):
                valeur += liste[indice]
                compt +=1
        Liste_lissé.append(valeur/compt)
    return Liste_lissé


def isdecreasing(liste):
    Liste_lissé = filtrage_moyenne(liste,int(len(liste)/5))
    positif = 0
    negatif =0
    for indice in range(len(Liste_lissé)-1):
        if Liste_lissé[indice +1]-Liste_lissé[indice]>0:
            positif +=1
        else:
            negatif +=1
    print(positif)
    print(negatif)
    if positif/(positif + negatif) >= 0.90:
        return 1
    elif negatif/(positif + negatif) >= 0.90:
        return 0
    else:
        return "constant"


liste_x2 = [-0.0014735395088791847, -0.0013771335361525416, -0.0014560652198269963, -0.0015100919408723712, -0.0016230830224230886, -0.00181664084084332, -0.0018875288078561425, -0.0018548914231359959, -0.0018560769967734814, -0.0018952939426526427, -0.0019519891357049346, -0.002003998029977083, -0.002021623542532325, -0.0020106446463614702, -0.002080110367387533, -0.0022003997582942247, -0.002135601593181491, -0.0022614572662860155, -0.002263542264699936, -0.0022422524634748697, -0.002347594127058983, -0.002350050024688244, -0.0023671858943998814, -0.0024292427115142345, -0.0024945829063653946, -0.002598084043711424, -0.002683622296899557, -0.0025597454514354467, -0.002608476672321558, -0.0027714078314602375, -0.0028317563701421022, -0.002853127894923091, -0.0027937672566622496, -0.0028371643275022507, -0.002794852014631033, -0.0029211072251200676, -0.0029698319267481565, -0.00305237271822989, -0.003004396567121148, -0.0030517070554196835, -0.0030425889417529106, -0.0030545007903128862, -0.003156049642711878, -0.0031264363788068295, -0.0031461985781788826, -0.0032492487225681543, -0.0033228385727852583, -0.003363280091434717, -0.0034014845732599497, -0.003389900317415595, -0.003402444999665022, -0.0035408714320510626, -0.0033968286588788033, -0.003493438009172678, -0.003436898346990347, -0.0034372780937701464, -0.0035951861646026373, -0.003582974197342992, -0.003618218470364809, -0.003681817092001438, -0.003672856604680419, -0.0036197584122419357, -0.0037015494890511036, -0.0036704258527606726, -0.0037603669334203005, -0.0037658284418284893, -0.003862601239234209, -0.00390709238126874, -0.003907490987330675, -0.003978116437792778, -0.004024355206638575, -0.004132827743887901, -0.004132721107453108, -0.00410001864656806, -0.004162914119660854, -0.004126435611397028, -0.004254614003002644, -0.004318490158766508, -0.0042209383100271225, -0.004279896151274443, -0.004282982554286718, -0.004275055136531591, -0.004341452848166227, -0.004375331103801727, -0.004394531715661287, -0.004367964807897806, -0.00434370432049036, -0.004332487937062979, -0.004416697192937136, -0.004408783745020628, -0.004482683259993792, -0.004479362163692713, -0.004426056519150734, -0.004551970399916172, -0.00457298057153821, -0.004617617465555668, -0.004566979594528675, -0.0046251011081039906, -0.004632831551134586, -0.0047208163887262344, -0.004700812976807356, -0.00478954566642642, -0.004792636726051569, -0.004830111749470234, -0.004863078240305185, -0.004856376443058252, -0.004907616414129734, -0.004982407204806805, -0.005010180175304413, -0.005003832746297121, -0.005027549806982279, -0.005062527023255825, -0.005125000141561031, -0.005082614719867706, -0.005167682189494371, -0.005210063420236111, -0.0052330209873616695, -0.005271619185805321, -0.0052934507839381695, -0.0052924384362995625, -0.0053718201816082, -0.0053402092307806015, -0.005395624786615372, -0.005448249634355307, -0.005508963484317064, -0.005517653189599514, -0.005612063221633434, -0.005630702245980501, -0.005609660409390926, -0.005624477751553059, -0.005710041616111994, -0.0056510488502681255, -0.005624858662486076, -0.005522376392036676, -0.005128081422299147, -0.004986314103007317, -0.004905934911221266, -0.0049670725129544735, -0.004842344205826521, -0.00460800202563405, -0.004578262567520142, -0.004594169557094574, -0.00456574559211731, -0.004586101043969393, -0.0045936391688883305, -0.004640352912247181, -0.0046485005877912045, -0.004639883525669575, -0.004671014845371246, -0.004634642507880926, -0.0046864161267876625, -0.00462086359038949, -0.004600543528795242, -0.005503443069756031, -0.010072248056530952, -0.010498013347387314, -0.010560744442045689, -0.010420311242341995, -0.007488677278161049, -0.007355606183409691, -0.007497620303183794, -0.007430557161569595, -0.007406546268612146, -0.00644866656512022, -0.006638417951762676, -0.006835556123405695, -0.0066812545992434025, -0.0068689798936247826, -0.007215514779090881, -0.006950790528208017, -0.007462449371814728, -0.007006850093603134, -0.007192033343017101, -0.007433181628584862, -0.00708012655377388, -0.007059368304908276, -0.007552274037152529, -0.007470239419490099, -0.0074655599892139435, -0.007511536590754986, -0.00796286016702652, -0.007448035292327404, -0.007409742102026939, -0.008036964572966099, -0.007699582725763321, -0.008170182816684246, -0.008455967530608177, -0.008128495886921883, -0.007851854898035526, -0.007904264144599438, -0.008606886491179466, -0.008148972876369953, -0.007113651838153601, -0.008851679973304272]

a = isdecreasing(liste_x2)
print(a)

ord = [i for i in range(len(liste_x2))]
plt.plot(ord, liste_x2)
plt.plot(ord, filtrage_moyenne(liste_x2,int(len(liste_x2)/5)))

plt.show()
